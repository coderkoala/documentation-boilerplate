(function(){var a=this;var b=a.$;var c=a.Documentation={};var d=c.core=function(e){var f={md_src:"document.md",el:{documentation:"#documentation",loading:"#loading"},templates:{footer:"#tmpl-footer"},copy:{warning_file_protocol:"<strong>Warning:</strong> the markdown file cannot be loaded through the `file:` protocol. This file should be served through a webserver."}};this.config=b.extend(true,f,e||{});this._init()};d.prototype._init=function(){this._registerInstanceVariables();if(a.location.protocol!=="file:"){this.$documentation.load(this.config.md_src,b.proxy(this._processMarkdown,this))}else{this.$loading.html(this.config.copy.warning_file_protocol)}this.$documentation.on("click","a",b.proxy(this.targetBlank,this))};d.prototype._registerInstanceVariables=function(){var e=this.config;this.$documentation=b(e.el.documentation);this.$loading=b(e.el.loading)};d.prototype._processMarkdown=function(g){var f=new Showdown.converter(),e=f.makeHtml(g);this.$documentation.html(e);b("h2").each(function(j,l){var h=b(),k=l.nextSibling;b(l).wrapInner('<span class="double-underline" />');h.push(l);while(k){if(!b(k).is("h2")&&!b(k).is("table")){h.push(k);k=k.nextSibling}else{break}}var m=b(l).attr("id");b(l).attr("id","");h.wrapAll('<div class="main-container container-fluid" id="'+m+'" />')});b("h2").wrap("<header />");b("p").first().attr("class","lead");b("h1").attr("id","").prependTo("header:first");b("pre").addClass("prettyprint linenums");a.prettyPrint&&prettyPrint();this.fillContent({template_source:this.config.templates.footer,append_to:this.config.el.documentation,context:copy});this._processTables();this._cleanUpMarkdown()};d.prototype._cleanUpMarkdown=function(){this.$documentation.find("> p, > ul, > ol, > blockquote, > h3, > h4, > h5, > h6").each(function(e,f){b(f).wrap('<div class="main-container container-fluid" />')})};d.prototype._processTables=function(){b("table").each(function(m,f){var e=b(f),n=e.find("thead").find("th"),j=e.find("tbody").find("tr"),i=[],h=[],l={};var g=f.nextSibling;console.log(b(f.nextSibling));if(b(f.nextSibling).is("p")){b(f.nextSibling).wrap('<div class="main-container container-fluid />')}e.addClass("table table-bordered table-striped table-id-"+m).wrap('<div class="large-container container-fluid" />');if(!e.hasClass("all-devices")){b(f).addClass("hidden-phone");n.each(function(o,p){i[o]=b(p).text()});j.each(function(p,o){b(o).find("td").each(function(q,s){var r=b(s).html();l['"'+i[q]+'"']=r});h.push(l);l={}});var k='<ul class="list-from-table visible-phone list-id-'+m+'" />';e.after(k);b.each(h,function(q,s){var p='<li><dl class="entry-id-'+q+'"></dl></li>',r,o;b(".list-id-"+m).append(p);b.each(i,function(u,t){r="<dt>"+t+"</dt>";o="<dd>"+s['"'+t+'"']+"</dd>";b(".entry-id-"+q).append(r+o)})})}})};d.prototype.targetBlank=function(e){e.preventDefault();var f=b(e.currentTarget).attr("href");a.open(f)};d.prototype.fillContent=function(g){var h=b(g.template_source).html(),f=Handlebars.compile(h),e=f(g.context);b(g.append_to).append(e)}}).call(this);